import os
import sys
import json
import re
from os.path import join

$VI_MODE = True
$IGNOREEOF = True
$INDENT = "    "
$CASE_SENSITIVE_COMPLETIONS = True
$COMPLETIONS_CONFIRM = True
$AUTO_CD = True
$HISTCONTROL = 'ignoredups'
$XONSH_SHOW_TRACEBACK = True
$XONSH_HISTORY_MATCH_ANYWHERE = True
$XONSH_STORE_STDOUT = True
$XONSH_AUTOPAIR = True

# xontribs
xontrib load z
xontrib load docker_tabcomplete
xontrib load fzf-widgets
xontrib load readable-traceback
xontrib load direnv

# golang
$GOPATH = $HOME

# パスの設定
PATHS = [
    join($GOPATH[0], 'bin'),
    join($HOME, 'src/bin/google-cloud-sdk/bin'),
    join($HOME, '.cargo/bin'),
]
for path in PATHS:
    $PATH.append(path)

def get_git_user():
    return $(git config user.name).strip()

# エイリアス
aliases['vi'] = 'nvim'
aliases['la'] = 'ls -latr'
aliases['dc'] = 'docker compose'
aliases['vt'] = 'vi ~/.tmux.conf'
aliases['vx'] = 'vi ~/.xonshrc'
aliases['vv'] = 'vi ~/.vimrc'
aliases['vz'] = 'vi ~/.zshrc'
aliases['sx'] = 'source ~/.xonshrc'
aliases['git_private'] = 'git config --local user.name "amaotone"; git config --local user.email "amane.suzu@gmail.com"'
aliases['git_dena'] = 'git config --local user.name "Amane Suzuki"; git config --local user.email "amane.suzuki@dena.com"'

# 見た目
$XONSH_APPEND_NEWLINE = True
$PROMPT = lambda: "\n{BOLD_INTENSE_YELLOW}┌[ {cwd} ] {CYAN}" + get_git_user() + " {gitstatus:{}}\n{BOLD_INTENSE_YELLOW}└▶ "
$RIGHT_PROMPT = "\n{CYAN}{user}@{hostname}"
$XONSH_GITSTATUS_BRANCH = "{GREEN}"
$XONSH_GITSTATUS_OPERATION = "{CYAN}"
$XONSH_GITSTATUS_STAGED = "{RED}●"
$XONSH_GITSTATUS_CONFLICTS = "{RED}×"
$XONSH_GITSTATUS_CHANGED = "{CYAN}+"
$XONSH_GITSTATUS_UNTRACKED = "{WHITE}…"
$XONSH_GITSTATUS_STASHED = "{WHITE}⚑"
$XONSH_GITSTATUS_AHEAD = "{WHITE}↑·"
$XONSH_GITSTATUS_BEHIND = "{WHITE}↓·"
